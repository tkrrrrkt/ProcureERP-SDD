// ProcurERP Database Schema
// CCSDD: Prisma Schema は Domain API の永続化層を定義
// RLS: tenant_id による行レベルセキュリティを PostgreSQL で実装

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// =============================================================================
// ProcurERP Models
// =============================================================================
// Models will be added as features are implemented following CCSDD process:
// 1. spec-init → requirements → design → tasks
// 2. Contracts定義
// 3. DB/Migration/RLS
//
// 想定される初期モデル（product.md MVP-1 参照）:
// - BusinessPartner（取引先）
// - Supplier（仕入先）
// - Item（品目）
// - PurchaseRequest（購買依頼）
// - Quotation（見積）
// - PurchaseOrder（発注）
// - GoodsReceipt（入荷）
// - PurchaseBooking（仕入計上）
// =============================================================================

// =============================================================================
// Master Data: Employee（社員マスタ）
// =============================================================================

model Employee {
  id                      String    @id @default(uuid())
  tenantId                String    @map("tenant_id")
  employeeCode            String    @map("employee_code")
  employeeName            String    @map("employee_name")
  employeeKanaName        String    @map("employee_kana_name")
  email                   String?
  joinDate                DateTime  @map("join_date")
  retireDate              DateTime? @map("retire_date")
  remarks                 String?
  isActive                Boolean   @default(true) @map("is_active")
  version                 Int       @default(1)
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")
  createdByLoginAccountId String?   @map("created_by_login_account_id")
  updatedByLoginAccountId String?   @map("updated_by_login_account_id")

  @@unique([tenantId, employeeCode])
  @@index([tenantId, employeeCode])
  @@index([tenantId, isActive])
  @@index([tenantId, joinDate])
  @@map("employees")
}